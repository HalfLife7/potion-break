{"version":3,"sources":["../../../src/routes/controllers/authenticationController.js"],"names":["express","require","router","Router","passport","get","authenticate","failureRedirect","req","res","redirect","next","url","originalUrl","logout","module","exports"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AAEA,IAAMC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAf;;AACA,IAAMC,QAAQ,GAAGH,OAAO,CAAC,UAAD,CAAxB,C,CAEA;AACA;AACA;AACA;AACA;;;AACAC,MAAM,CAACG,GAAP,CACE,QADF,EAEED,QAAQ,CAACE,YAAT,CAAsB,OAAtB,EAA+B;AAC7BC,EAAAA,eAAe,EAAE;AADY,CAA/B,CAFF,EAKE,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAClBA,EAAAA,GAAG,CAACC,QAAJ,CAAa,GAAb;AACD,CAPH,E,CAUA;AACA;AACA;AACA;AACA;;AACAR,MAAM,CAACG,GAAP,CACE,eADF,EAEE;AACA,UAAUG,GAAV,EAAeC,GAAf,EAAoBE,IAApB,EAA0B;AACxBH,EAAAA,GAAG,CAACI,GAAJ,GAAUJ,GAAG,CAACK,WAAd;AACAF,EAAAA,IAAI;AACL,CANH,EAOEP,QAAQ,CAACE,YAAT,CAAsB,OAAtB,EAA+B;AAC7BC,EAAAA,eAAe,EAAE;AADY,CAA/B,CAPF,EAUE,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAClBA,EAAAA,GAAG,CAACC,QAAJ,CAAa,eAAb;AACD,CAZH;AAeAR,MAAM,CAACG,GAAP,CAAW,SAAX,EAAsB,UAAUG,GAAV,EAAeC,GAAf,EAAoB;AACxCD,EAAAA,GAAG,CAACM,MAAJ;AACAL,EAAAA,GAAG,CAACC,QAAJ,CAAa,GAAb;AACD,CAHD;AAKAK,MAAM,CAACC,OAAP,GAAiBd,MAAjB","sourcesContent":["const express = require(\"express\");\n\r\nconst router = express.Router();\r\nconst passport = require(\"passport\");\r\n\r\n// GET /auth/steam\r\n//   Use passport.authenticate() as route middleware to authenticate the\r\n//   request.  The first step in Steam authentication will involve redirecting\r\n//   the user to steamcommunity.com.  After authenticating, Steam will redirect the\r\n//   user back to this application at /auth/steam/return\r\nrouter.get(\r\n  \"/steam\",\r\n  passport.authenticate(\"steam\", {\r\n    failureRedirect: \"/\",\r\n  }),\r\n  function (req, res) {\r\n    res.redirect(\"/\");\r\n  }\r\n);\r\n\r\n// GET /auth/steam/return\r\n//   Use passport.authenticate() as route middleware to authenticate the\r\n//   request.  If authentication fails, the user will be redirected back to the\r\n//   login page.  Otherwise, the primary route function function will be called,\r\n//   which, in this example, will redirect the user to the home page.\r\nrouter.get(\r\n  \"/steam/return\",\r\n  // Issue #37 - Workaround for Express router module stripping the full url, causing assertion to fail\r\n  function (req, res, next) {\r\n    req.url = req.originalUrl;\r\n    next();\r\n  },\r\n  passport.authenticate(\"steam\", {\r\n    failureRedirect: \"/\",\r\n  }),\r\n  function (req, res) {\r\n    res.redirect(\"/game-library\");\r\n  }\r\n);\r\n\r\nrouter.get(\"/logout\", function (req, res) {\r\n  req.logout();\r\n  res.redirect(\"/\");\r\n});\r\n\r\nmodule.exports = router;\r\n"],"file":"authenticationController.js"}